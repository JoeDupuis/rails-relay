<h1><%= @server.address %></h1>

<dl>
  <dt>Address</dt>
  <dd><%= @server.address %>:<%= @server.port %></dd>

  <dt>SSL</dt>
  <dd><%= @server.ssl ? "Yes" : "No" %></dd>

  <dt>Nickname</dt>
  <dd><%= @server.nickname %></dd>

  <dt>Username</dt>
  <dd><%= @server.username %></dd>

  <dt>Real Name</dt>
  <dd><%= @server.realname %></dd>

  <dt>Auth Method</dt>
  <dd><%= @server.auth_method.titleize %></dd>

  <dt>Status</dt>
  <dd><%= @server.connected_at ? "Connected" : "Disconnected" %></dd>
</dl>

<h2>Channels</h2>
<% joined_channels = @server.channels.joined %>
<% if joined_channels.any? %>
  <ul>
    <% joined_channels.each do |channel| %>
      <li>
        <%= link_to channel.name, channel_path(channel) %>
        <% if channel.unread? %>
          <span class="unread-badge"><%= channel.unread_count %></span>
        <% end %>
      </li>
    <% end %>
  </ul>
<% else %>
  <p>No channels joined yet.</p>
<% end %>

<% if @server.connected_at %>
  <h3>Join Channel</h3>
  <%= form_with model: Channel.new, url: server_channels_path(@server) do |form| %>
    <div>
      <%= form.label :name, "Channel Name" %>
      <%= form.text_field :name, placeholder: "#channel" %>
    </div>
    <%= form.submit "Join" %>
  <% end %>
<% end %>

<div>
  <%= link_to "Edit", edit_server_path(@server) %>
  <%= button_to "Delete", @server, method: :delete, data: { turbo_confirm: "Are you sure?" } %>
</div>

<%= link_to "Back to Servers", servers_path %>
