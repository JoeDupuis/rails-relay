<% if channel.server.connected? && channel.joined %>
  <%= form_with url: channel_messages_path(channel),
      class: "message-input",
      data: {
        controller: "message-form",
        message_form_message_list_outlet: ".messages",
        message_form_upload_url_value: channel_uploads_path(channel),
        message_form_channel_name_value: channel.name,
        action: "submit->message-form#formSubmit"
      } do |f| %>
    <%= f.text_field :content,
        placeholder: "Message #{channel.name}",
        class: "field",
        data: { message_form_target: "input", action: "keydown.enter->message-form#submit" } %>
    <label class="upload">
      ğŸ“
      <input type="file"
             accept="image/png,image/jpeg,image/gif,image/webp"
             data-action="change->message-form#upload"
             data-message-form-target="fileInput"
             hidden>
    </label>
    <%= f.submit "Send", class: "submit" %>
  <% end %>
<% elsif channel.server.connected? && !channel.joined %>
  <div class="message-input">
    <%= text_field_tag :content, nil, placeholder: "Message #{channel.name}", class: "field", disabled: true %>
  </div>
<% else %>
  <div class="message-input">
    <span class="disabled">Connect to server to send messages.</span>
  </div>
<% end %>
